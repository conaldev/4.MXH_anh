<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="https://s-xem.mkocdn.com/bundles/mkoxem/css/xem.css">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        function like(postID, userID) {
            console.log('postID '+postID)
            console.log('userID '+userID)
            let json = {
                "post": {"id": postID},
                "appUser": {"id": userID}
            }
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                type: "POST",
                data: JSON.stringify(json),
                url: "/post/like",
                success: function (ms) {
                    console.log("like thang cong " + ms)
                }
            });
            event.preventDefault();
        }

        $(document).ready(function () {

        });

    </script>
<!--    <link rel="stylesheet"th:href="@{/css/xemvn.css}">-->
</head>
<body>
<div th:replace="~{layout/layout::header(${user})}"></div>

<div id="content">
    <div id="mainContainer">
        <div id="leftColumn">
            <div class="mainBox">
                <h3> Ảnh chế mới</h3>
                <div class="tips"><b>Mẹo: </b>Hãy giúp <b>xem.vn <a href="/vote">bình chọn ảnh</a></b> để nhiều ảnh hay
                    xuất hiện ở đây hơn
                </div>
                <div id="homepage_banner" class="windowContainer"
                     style="font-size:14px;line-height: 20px;font-style: italic;padding: 10px;">
                    <h3 style="font-size: 16px;text-align:center;font-style:normal">DANH SÁCH “TOP DANH HÀI TUẦN”
                        4-10/7/2016</h3>
                    BQT xem.vn xin thông báo DANH SÁCH “TOP DANH HÀI TUẦN” từ ngày 4/7/2016 tới ngày 10/7/2016.
                    <br><br>
                    <b>Danh sách chi tiết:</b> <a style="color:red" href="http://xem.vn/top-danh-hai/20"
                                                  target="_blank">“TOP DANH HÀI TUẦN” 4-10/7/2016</a>
                    <br><br>
                    Hy vọng <b>xem.vn</b> ngày một phát triển và trở thành một cộng đồng lành mạnh, tích cực cho giới
                    trẻ Việt Nam.
                    <br><br>
                    <b>Trân trọng!</b>
                    <br>
                    BQT xem.vn
                </div>
                <div class="photoList">
                    <div class="photoListItem" th:each="post: ${posts}" data-id="1402992" data-newly-listed="True"
                         data-nsfw="False">
                        <div class="listItemSeparator"></div>
                        <div class="thumbnail">
                            <a href="/#" target="_blank" th:title="${post.title}">
                                <img th:src="@{'/content/'+${post.photoName}}"
                                     th:alt="${post.title}" class="thumbImg">
                            </a>
                        </div>

                        <div class="info">
                            <h2>
                                <a target="_blank" href="/#" th:title="${post.title}" th:text="${post.title}"></a>
                            </h2>
                            <div class="uploader">
                                Đăng bởi <a th:href="@{${post.appUser.username}}" th:title="${post.appUser.username}"
                                            th:text="${post.appUser.username}">toikobik</a>
                                <span th:text="${currentTime}-${post.getDateUpload().getTime()}"
                                      th:name="*{post.dateUpload}"></span>
                            </div>
                            <div class="stats">
                                <div class="viewComments">
                                    <span class="views" title="Views">61</span>
                                    <span class="comments" title="Comments">0</span>
                                </div>
                                <div class="likesWrapper" sec:authorize="isAuthenticated()">
                                    <button type="button" th:onclick="'like(\'' + ${post.id} +'\',\''+${user.id} + '\');'" >like
                                    </button>
                                </div>
                                <div class="clear"></div>
                            </div>
                        </div>
                        <div class="clear">
                        </div>
                    </div>
                    <div id="listEnd"></div>
                    <div class="listItemSeparator"></div>
                    <p class="loading" style="display: none">
                        <img src="https://s-xem.mkocdn.com/bundles/mkoxem/images/loading.gif" alt="loading">
                        <br>
                        Đang tải thêm ảnh...
                    </p>
                </div>
                <div class="tag-footer">
                    <br><br><br><br>
                </div>
                <div>
                    <a class="buttons nextListPage" style="" th:href="@{'/'(page=${posts.number + 1})}"
                       title="xem thêm, còn nhiều lắm">xem thêm, còn nhiều lắm</a>
                    <!--                    <a th:href="@{'/'(page=${posts.number - 1})}" th:if="${posts.hasPrevious()}">Previous</a>-->
                    <!--                    <span th:text="${posts.number + 1}"></span>/<span th:text="${posts.totalPages}"></span>-->
                    <!--                    <a th:href="@{'/'(page=${posts.number + 1})}" th:if="${posts.hasNext()}">Next</a>-->
                </div>
                <div th:replace="~{layout/layout::footer}"></div>
            </div>
        </div>
    </div>

</div>


<table>
    <tr>

    </tr>
</table>

</body>
</html>